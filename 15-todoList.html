<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My To-do List</title>
    <link rel="stylesheet" href="15-todolist.css">
</head>
<body>
    <div class="container">
        <div class="control-todo">
            <input id="todoInput" type="text" placeholder="todo....">
            <input id="dueDate" type="date">
            <button class="add-todo-btn" id="js-add-todo-btn">Add to-do</button>
        </div>
        <div class="display-todo-list" id="todolist-output"></div>
    </div>
    
    

    <script>
        const todoInput = document.getElementById('todoInput');
        const dueDateInput = document.getElementById('dueDate');
        const addTodoBtn = document.getElementById('js-add-todo-btn');
        const outPutDiv = document.getElementById('todolist-output')

        
       const todoList = JSON.parse(localStorage.getItem('todoList')) ||
       [
            {
                todo: "make dinner",
                dueDate: "7/12/2024" 
            },
            {
                todo: "watch youtube",
                dueDate: "4/10/2025" 
            },
            {
                todo: "wash dishes",
                dueDate: "6/10/2024" 
            },

        ];
        displayTodo();


        // defining the add todo function
        function addTodo () {
            const todo = todoInput.value;
            const dueDate = dueDateInput.value;
            todoList.push({
                 todo,
                 dueDate
            })
            localStorage.setItem('todoList', JSON.stringify(todoList))
        } 

        // handling the add to-do button
        addTodoBtn.addEventListener('click', () => {
            addTodo();
            displayTodo();
        })

        function displayTodo () {
            let todoListHTML = ''; // accumulator variable;
            // looping through the todoList array.
            todoList.forEach((todo, index) => {
              const toDo = todo.todo;
              const duedate = todo.dueDate;
              // generating html for each todo in the array.
                todoListHTML += ` 
                    <div class="list-container">
                        <p>
                            ${toDo}
                        </p>
                        <p>
                            ${duedate}
                        </p>
                        <button class="delete-btn" onclick="
                            todoList.splice(${index}, 3);
                            localStorage.setItem('todoList', JSON.stringify(todoList))
                            displayTodo();
                            alert('One item deleted from the todo list');
                        ">
                            Delete
                        </button>
                    </div>
                `
            })
            outPutDiv.innerHTML = todoListHTML;
        }
    </script>

<a href="2-variables.html">Learn About Variables</a>
<a href="3-calculator.html">Use my online calculator</a> 
<a href="4-booleans.html">Learn Booleans</a> 
<a href="5-rock-paper-scissors-games.html">Playing a game</a> 
<a href="6-functions.html">The functions</a> 
<a href="7-objects.html">About Objects</a> 
<a href="8-dom.html">The DOM</a> 
<a href="9-loops.html">Learning about loops</a> 
<a href="10-setTimout.html">Learning the SetTimeout Async function</a> 
<a href="11-setInterval.html">The setInterval Function</a> 
<a href="12-typingeffect-example.html">Gpt Typing Effect example</a> 
<a href="13-events.html">Learning Events</a> 
<a href="14-arrays.html">Arrays</a> 
<a href="index.html">Go to homepage</a> 
<a href="oop.html">The conscept of OOp</a>
</body>
</html>